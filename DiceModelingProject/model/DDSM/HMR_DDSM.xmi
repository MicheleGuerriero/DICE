<?xml version="1.0" encoding="ISO-8859-1"?>
<it.polimi.modaclouds.resourcemodel.cloud:HMR_DDSM
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:it.polimi.modaclouds.resourcemodel.cloud="http://cloud/1.0"
    type="cloudify_dsl_1_0"
    id="tosca_definitions_version">
  <hasMasterNode
      name="Master"
      type="resource"
      cpu="4"
      ram="4G"
      disk_size="120"
      location=""
      domain=""
      subnet_id="subnetID"
      access_key_id="AccID"
      secret_access_key="SecretKey"
      port="12"
      url="URL"
      ce_certificate="Certificate"
      image_uuid="imageID"
      net_uuid="NetID"
      server_type="cloudify.flexiant.nodes.Server"
      key_uuid="KeyID"
      wait_started_interval="30"
      wait_started_timeout="3"
      user="Username"
      security_groups="SecurityGroup"
      api_uuid="ApiID"
      password="123456"
      customer="Customer"
      masterType="MasterNode">
    <contains_config
        name="config"
        type="config">
      <relationships
          type="config_in_master"
          target="master"/>
      <relationships
          type="config_on_worker"
          target="worker"/>
    </contains_config>
    <contains_hadoopRunner
        name="hadoop"
        type="cloudify.nodes.ApplicationServer">
      <relationships
          type="cloudify.relationships.contained_in"
          target="master"/>
      <relationships
          type="hadoop_on_master"
          target="master_stack"/>
      <relationships
          type="cloudify.relationships.depends_on"
          target="worker_stack"/>
    </contains_hadoopRunner>
    <contains_master_chef
        name="master_stack"
        type="chef_node">
      <relationships
          type="cloudify.relationships.contained_in"
          target="master"/>
      <relationships
          type="stack_on_config"
          target="config"/>
      <chef_cook_books>recipe[apt::default]</chef_cook_books>
      <chef_cook_books>recipe[java::default]</chef_cook_books>
      <chef_cook_books>recipe[hadoop::hadoop_hdfs_namenode]</chef_cook_books>
      <chef_cook_books>recipe[hadoop::hadoop_yarn_resourcemanager]</chef_cook_books>
      <chef_cook_books>recipe[hadoop::hadoop_mapreduce_historyserver]</chef_cook_books>
    </contains_master_chef>
  </hasMasterNode>
  <hasSlaves
      name="Workernode"
      cpu="12"
      ram="16G"
      domain=""
      subnet_id="subnetID"
      access_key_id="AccID"
      secret_access_key="secKey"
      url="URL"
      ce_certificate="certificate"
      image_uuid="imageID"
      net_uuid="NetID"
      server_type="server_type"
      key_uuid="KeyID"
      wait_started_interval="30"
      wait_started_timeout="6"
      user="UserName"
      security_groups="secGroup"
      api_uuid="api_uuid"
      password="123456"
      customer="customer"
      slaveType="cloudify.flexiant.nodes.Server"
      instances="2">
    <contains_worker_chef
        name="worker_stack"
        type="chef_node">
      <relationships
          type="cloudify.relationships.contained_in"
          target="worker"/>
      <relationships
          type="stack_on_config"
          target="config"/>
      <chef_cook_books>recipe[apt::default]</chef_cook_books>
      <chef_cook_books>recipe[java::default]</chef_cook_books>
      <chef_cook_books>recipe[hadoop::hadoop_hdfs_datanode]</chef_cook_books>
      <chef_cook_books>recipe[hadoop::hadoop_yarn_nodemanager]</chef_cook_books>
    </contains_worker_chef>
  </hasSlaves>
  <imports>http://www.getcloudify.org/spec/cloudify/3.3m4/types.yaml</imports>
  <imports>https://raw.githubusercontent.com/buhanec/cloudify-chef-plugin/devel/plugin.yaml</imports>
  <imports>https://raw.githubusercontent.com/buhanec/cloudify-flexiant-plugin/3.3m2/plugin.yaml</imports>
  <hasoutputs
      name="mapred_jobhistory">
    <value>master_stack</value>
    <value>chef_attributes</value>
    <value>hadoop</value>
    <value>mapred_site</value>
    <value>mapreduce.jobhistory.address</value>
  </hasoutputs>
  <hasoutputs
      name="mapred_jobhistory_webui">
    <value>master_stack</value>
    <value>chef_attributes</value>
    <value>hadoop</value>
    <value>mapred_site</value>
    <value>mapreduce.jobhistory.webapp.address</value>
  </hasoutputs>
  <hasoutputs
      name="mapred_job_tracker">
    <value>master_stack</value>
    <value>chef_attributes</value>
    <value>hadoop</value>
    <value>mapred_site</value>
    <value>mapred.job.tracker</value>
  </hasoutputs>
  <hasoutputs
      name="master_ip">
    <value>config</value>
    <value>master_ip</value>
  </hasoutputs>
  <hasoutputs
      name="worker_ips">
    <value>config</value>
    <value>worker_ips</value>
  </hasoutputs>
  <hasinputs
      name="chef_version"
      value="defaultValue"
      description="default description"/>
  <hasinputs
      name="chef_server"
      value="defaultValue"
      description="Default description"/>
</it.polimi.modaclouds.resourcemodel.cloud:HMR_DDSM>
